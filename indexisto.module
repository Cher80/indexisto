<?php
/**
* @file
* A description of what your module does.
*/


/**
 * Используем hook_block_info().
 *
 * Объявляем наш блок с полем поиска.
 */
function indexisto_block_info() {
  $blocks = array();

  $blocks['indexisto_search'] = array(
    'info' => t('Indexisto search'),
  );

  return $blocks;
}

/**
 * Используем hook_block_view_alter().
 *
 * Мы перехватываем обработку вывода блока и пишем в него нужный код.
 */
function indexisto_block_view_alter(&$data, $block) {
  // Ловим наш блок.
  if ($block->delta == 'indexisto_search') {
    $data['content'] = '<input autocomplete="off"  autocorrect="off" id="indx_srchbox_529f0d99273e3ec941bbed01" placeholder="Start typing" style="outline-color: transparent;outline: none;background: #FFF url(http://servant.indexisto.com/files/searchbox/search_icon_21px.png) no-repeat scroll 6px center;border: 2px solid rgb(255, 151, 18);border-radius: 5px;width: 202px;padding: 0 0 0 31px;height: 32px;line-height: 23px;color: #abaaaa;font-family: Arial;font-size: 18px;" type="text" />';
  }

  return $block;
}

/**
 * Используем hook_preprocess_html().
 *
 * При подготовке страницы мы цепляем JS файл.
 */
function indexisto_preprocess_html(&$variables) {
  drupal_add_js("http://servant.indexisto.com/files/searchbox/searchbox.nocache.js?type=edit");
}
